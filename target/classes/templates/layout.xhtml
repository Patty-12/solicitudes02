<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions">

<h:head>
    <title><ui:insert name="titulo">Panel principal</ui:insert></title>
    <h:outputStylesheet library="css" name="estilo.css" />
</h:head>

<h:body>

<div class="dashboard">

    <!-- ===== SIDEBAR ===== -->
    <aside class="sidebar">

        <!-- LOGO Y TÍTULO -->
        <div class="sidebar-header">
            <h:graphicImage library="img" name="logo.png"
                            styleClass="sidebar-logo"
                            alt="Logo" />
            <h3>Sistema de Solicitudes</h3>
        </div>

        <!-- ===== MENÚ LATERAL (CENTRADO) ===== -->
        <nav class="sidebar-nav">
            <ul id="menu">

                <!-- TODOS -->
                <li><h:link outcome="/home" value="Inicio" /></li>
                <li><h:link outcome="/Solicitud/index" value="Solicitudes" /></li>

                <!-- ===== DIRECTOR DE ÁREA ===== -->
                <h:panelGroup rendered="#{fn:toLowerCase(loginBean.usuario.cargo) eq 'director'}">
                    <li><h:link outcome="/Solicitud/pendientes" value="Solicitudes Pendientes" /></li>
                    <li><h:link outcome="/Reportes/index" value="Reportes" /></li>
                </h:panelGroup>

                <!-- ===== DIRECTOR TIC ===== -->
                <h:panelGroup rendered="#{fn:toLowerCase(loginBean.usuario.cargo) eq 'director tic'}">
                    <li><h:link outcome="/Solicitud/pendientes" value="Solicitudes Pendientes" /></li>
                    <li><h:link outcome="/Reportes/index" value="Reportes" /></li>
                </h:panelGroup>

                <!-- ===== OFICIAL DE SEGURIDAD ===== -->
                <h:panelGroup rendered="#{fn:toLowerCase(loginBean.usuario.cargo) eq 'oficial seguridad'}">
                    <li><h:link outcome="/Solicitud/pendientes" value="Solicitudes Pendientes" /></li>
                </h:panelGroup>

                <!-- ===== RESPONSABLE DE ACCESOS / MESA TIC ===== -->
                <h:panelGroup rendered="#{fn:toLowerCase(loginBean.usuario.cargo) eq 'responsable accesos'}">
                    <li><h:link outcome="/Solicitud/pendientesAccesos" value="Permisos por aplicar" /></li>
                </h:panelGroup>

                <!-- ===== ADMINISTRADOR ===== -->
                <h:panelGroup rendered="#{fn:toLowerCase(loginBean.usuario.cargo) eq 'administrador'}">

                    <li><h:link outcome="/Usuario/index" value="Gestión de Usuarios" /></li>
                    <li><h:link outcome="/Rol/index" value="Catálogo de Roles" /></li>
                    <li><h:link outcome="/UsuarioRol/index" value="Asignación Usuario–Rol" /></li>
                    <li><h:link outcome="/Aplicacion/index" value="Gestión de Aplicaciones" /></li>
                    <li><h:link outcome="/PermisoAplicacion/index" value="Permisos de Aplicaciones" /></li>
                    <li><h:link outcome="/Auditoria/index" value="Auditoría del Sistema" /></li>
                    <li><h:link outcome="/Reportes/index" value="Reportes" /></li>

                </h:panelGroup>

            </ul>
        </nav>

        <!-- BOTÓN LOGOUT AL PIE -->
        <div class="sidebar-logout">
            <h:form id="logoutForm">
                <h:commandButton id="logoutBtn"
                                 value="Cerrar Sesión"
                                 action="#{loginBean.logout}"
                                 styleClass="btn-logout"
                                 ajax="false" />
            </h:form>
        </div>

    </aside>

    <!-- ===== CONTENIDO PRINCIPAL ===== -->
    <main class="main-content">

        <!-- ENCABEZADO SUPERIOR (SIN LOGO) -->
        <header class="main-header">
            <h2>
                Bienvenido,
                #{loginBean.usuario.nombre}
                #{loginBean.usuario.apellido}
            </h2>

            <p>
                Correo: #{loginBean.usuario.correo}
                <span style="margin: 0 10px;">·</span>
                Cargo: #{loginBean.usuario.cargo}
            </p>
        </header>

        <!-- CONTENIDO VARIABLE -->
        <section class="content">
            <ui:insert name="contenido">
                <div class="card">
                    <h3>Resumen General</h3>
                    <p>El contenido se ajustará según el rol del usuario.</p>
                </div>
            </ui:insert>
        </section>

    </main>

</div>

</h:body>
</html>
