<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:head>
    <title><ui:insert name="titulo">Panel principal</ui:insert></title>
    <h:outputStylesheet library="css" name="style.css" />
</h:head>

<h:body>

    <div class="dashboard">

        <!-- ===== SIDEBAR ===== -->
        <aside class="sidebar">

            <div class="sidebar-header">
                <h:graphicImage library="img" name="logo.png" styleClass="sidebar-logo" alt="Logo" />
                <h3>Sistema de Solicitudes</h3>
            </div>

            <nav class="sidebar-nav">
                <ul id="menu">

                    <!-- TODOS: Inicio -->
                    <li>
                        <h:outputLink value="#{request.contextPath}/home.xhtml">
                            Inicio
                        </h:outputLink>
                    </li>

                    <!-- TODOS: Solicitudes -->
                    <li>
                        <h:outputLink value="#{request.contextPath}/Solicitud/index.xhtml">
                            Solicitudes
                        </h:outputLink>
                    </li>

                    <!-- ===== DIRECTOR ===== -->
                    <h:panelGroup rendered="#{loginBean.usuario.cargo eq 'Director'}">
                        <li>
                            <h:outputLink value="#{request.contextPath}/Solicitud/pendientes.xhtml">
                                Solicitudes Pendientes
                            </h:outputLink>
                        </li>
                        <li>
                            <h:outputLink value="#">
                                Reportes
                            </h:outputLink>
                        </li>
                    </h:panelGroup>

                    <!-- ===== ADMINISTRADOR ===== -->
                    <h:panelGroup rendered="#{loginBean.usuario.cargo eq 'Administrador'}">

                        <!-- Gestión de Usuarios -->
                        <li>
                            <h:outputLink value="#{request.contextPath}/Usuario/index.xhtml">
                                Gestión de Usuarios
                            </h:outputLink>
                        </li>

                        <!-- Catálogo de Roles -->
                        <li>
                            <h:outputLink value="#{request.contextPath}/Rol/index.xhtml">
                                Catálogo de Roles
                            </h:outputLink>
                        </li>

                        <!-- Asignación Usuario–Rol -->
                        <li>
                            <h:outputLink value="#{request.contextPath}/UsuarioRol/index.xhtml">
                                Asignación Usuario–Rol
                            </h:outputLink>
                        </li>

                        <!-- Gestión de Aplicaciones -->
                        <li>
                            <h:outputLink value="#{request.contextPath}/Aplicacion/index.xhtml">
                                Gestión de Aplicaciones
                            </h:outputLink>
                        </li>

                        <!-- Permisos de Aplicaciones -->
                        <li>
                            <h:outputLink value="#{request.contextPath}/PermisoAplicacion/index.xhtml">
                                Permisos de Aplicaciones
                            </h:outputLink>
                        </li>

                        <!-- Auditoría del Sistema -->
                        <li>
                            <h:outputLink value="#{request.contextPath}/Auditoria/index.xhtml">
                                Auditoría del Sistema
                            </h:outputLink>
                        </li>

                        <!-- Reportes (reservado para futuro) -->
                        <li>
                            <h:outputLink value="#">
                                Reportes
                            </h:outputLink>
                        </li>

                    </h:panelGroup>

                </ul>
            </nav>

            <!-- LOGOUT -->
            <h:form id="logoutForm">
                <h:commandButton id="logoutBtn"
                                 value="Cerrar Sesión"
                                 action="#{loginBean.logout}"
                                 styleClass="btn-logout"
                                 ajax="false" />
            </h:form>

        </aside>

        <!-- ===== CONTENIDO PRINCIPAL ===== -->
        <main class="main-content">

            <header class="main-header">
                <h2>
                    Bienvenido,
                    #{loginBean.usuario.nombre}
                    #{loginBean.usuario.apellido}
                </h2>
                <p>
                    Correo: #{loginBean.usuario.correo}
                    · Cargo: #{loginBean.usuario.cargo}
                </p>
            </header>

            <section class="content">
                <ui:insert name="contenido">
                    <div class="card">
                        <h3>Resumen General</h3>
                        <p>El contenido se ajustará según el rol del usuario.</p>
                    </div>
                </ui:insert>
            </section>

        </main>

    </div>

</h:body>
</html>
